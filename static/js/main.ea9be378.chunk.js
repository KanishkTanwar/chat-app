(this["webpackJsonpchat-app"]=this["webpackJsonpchat-app"]||[]).push([[0],{81:function(e,t,s){},83:function(e,t,s){},84:function(e,t,s){},92:function(e,t,s){"use strict";s.r(t);var n=s(1),a=s.n(n),i=s(43),r=s.n(i),c=s(11),u=s(12),o=s(14),l=s(13),p=s(94),m=s(8),h=Object(m.a)(),d=s(19),j=s(44),b=(s(81),s(0)),f=function(e){Object(o.a)(s,e);var t=Object(l.a)(s);function s(){var e;Object(c.a)(this,s);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).state={serverMessage:[],inputText:"",clientCount:0,spinner:!0,userTyping:[],isTyping:!1},e.socket=null,e.myRef=a.a.createRef(),e.onChatSubmit=function(t){t.preventDefault(),e.socket.emit("userMessage",e.state.inputText,e.props.userName),e.socket.emit("removeUserTyping",e.props.userName),new Audio("https://chat-app-co.herokuapp.com/bubble_pop_3.mp3").play(),e.setState({inputText:"",isTyping:!1})},e.onTyping=function(t){e.setState({inputText:t.target.value},(function(){""===e.state.inputText&&(e.socket.emit("removeUserTyping",e.props.userName),e.setState({isTyping:!1}))})),e.state.isTyping||(e.socket.emit("userStartToType",e.props.userName),e.setState({isTyping:!0}))},e}return Object(u.a)(s,[{key:"componentDidMount",value:function(){var e=this;this.props.userName?(this.socket=Object(j.io)("https://chat-app-co.herokuapp.com/",{path:"/global",transports:["polling","websocket"]}),this.socket.on("connect",(function(){e.setState({spinner:!1}),window.addEventListener("blur",(function(){e.socket.on("serverMessage",(function(){new Audio("https://chat-app-co.herokuapp.com/juntos-607.mp3").play()}))}))})),this.socket.on("serverMessage",(function(t){e.setState({serverMessage:[].concat(Object(d.a)(e.state.serverMessage),Object(d.a)(t))}),e.myRef.current.scrollIntoView({behavior:"smooth"})})),this.socket.on("userCount",(function(t){e.setState({clientCount:t})})),this.socket.on("userStartToType",(function(t){e.setState({userTyping:[].concat(Object(d.a)(e.state.userTyping),Object(d.a)(t))})})),this.socket.on("removeUserTyping",(function(t){var s=e.state.userTyping.filter((function(e){return e!==t&&e}));e.setState({userTyping:s})}))):h.push("/")}},{key:"componentWillUnmount",value:function(){this.socket&&this.socket.emit("userRemove",this.socket.id)}},{key:"render",value:function(){var e=this;return this.state.spinner?Object(b.jsx)("div",{className:"spinner"}):Object(b.jsxs)("section",{className:"chat",children:[Object(b.jsxs)("h1",{className:"chat__heading",children:["Welcome ",this.props.userName]}),Object(b.jsxs)("h4",{className:"chat__secondary",children:["Total users connected ",this.state.clientCount]}),Object(b.jsxs)("div",{className:"chat__pane",children:[this.state.serverMessage.map((function(t){return Object(b.jsxs)("ul",{children:[Object(b.jsxs)("li",{className:"chat__description",children:[Object(b.jsx)("span",{className:t.userName===e.props.userName?"usernameBlue":"usernameRed",children:t.userName}),": ",Object(b.jsx)("span",{children:t.message})]}),Object(b.jsx)("div",{className:"chat__border",ref:e.myRef})]},t.uuid)})),this.state.userTyping.map((function(e,t){return Object(b.jsxs)("p",{className:"chat__typing",children:[e,Object(b.jsx)("span",{className:"chat__dot1",children:"."}),Object(b.jsx)("span",{className:"chat__dot2",children:"."}),Object(b.jsx)("span",{className:"chat__dot3",children:"."})]},t)}))]}),Object(b.jsxs)("form",{className:"chat__form",onSubmit:function(t){return e.onChatSubmit(t)},children:[Object(b.jsx)("input",{className:"chat__input",type:"text",value:this.state.inputText,onChange:function(t){return e.onTyping(t)}}),Object(b.jsx)("button",{className:"chat__button",type:"submit",children:"Send"})]})]})}}]),s}(a.a.Component),v=f,g=(s(83),function(e){Object(o.a)(s,e);var t=Object(l.a)(s);function s(){var e;Object(c.a)(this,s);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={userName:""},e}return Object(u.a)(s,[{key:"render",value:function(){var e=this;return Object(b.jsx)("section",{className:"auth",children:Object(b.jsxs)("form",{className:"auth__form",onSubmit:function(t){return e.props.onNameSubmit(t,e.state.userName)},children:[Object(b.jsx)("input",{className:"auth__input",onChange:function(t){return e.setState({userName:t.target.value})},type:"text",placeholder:"what is your name"}),Object(b.jsx)("button",{className:"auth__button",type:"submit",children:"Enter"})]})})}}]),s}(a.a.Component)),O=g,N=[{id:1,title:"Engineering",owner:"kanishk",description:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque sed dictum elit, quis fringilla leo. Suspendisse potenti. Nulla porta arcu leo, ut hendrerit odio tristique aliquet. Aliquam scelerisque odio urna, sit amet fringilla dui blandit vel. Mauris auctor posuere gravida. Nam imperdiet vulputate feugiat. Mauris faucibus ligula vel leo varius rutrum id ut odio. Curabitur enim neque, dignissim nec suscipit vitae, luctus in neque. Praesent nec odio posuere, tempor neque sed, vulputate orci. Nunc sapien libero, ullamcorper eu fermentum eget, vehicula eu felis. Aenean ut neque urna."},{id:2,title:"Love",owner:"kanishk",description:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque sed dictum elit, quis fringilla leo. Suspendisse potenti. Nulla porta arcu leo, ut hendrerit odio tristique aliquet. Aliquam scelerisque odio urna, sit amet fringilla dui blandit vel. Mauris auctor posuere gravida. Nam imperdiet vulputate feugiat. Mauris faucibus ligula vel leo varius rutrum id ut odio. Curabitur enim neque, dignissim nec suscipit vitae, luctus in neque. Praesent nec odio posuere, tempor neque sed, vulputate orci. Nunc sapien libero, ullamcorper eu fermentum eget, vehicula eu felis. Aenean ut neque urna."}],x=function(){return Object(b.jsxs)("section",{className:"rooms",children:[Object(b.jsx)("h1",{children:"All available rooms"}),N.map((function(e){return Object(b.jsxs)("div",{className:"card",children:[Object(b.jsx)("div",{className:"card__title",children:e.title}),Object(b.jsx)("div",{className:"card__description",children:e.description})]},e.id)}))]})},y=(s(84),function(e){Object(o.a)(s,e);var t=Object(l.a)(s);function s(){var e;Object(c.a)(this,s);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={userName:""},e.onNameSubmit=function(t,s){t.preventDefault(),e.setState({userName:s}),h.push("/chat")},e}return Object(u.a)(s,[{key:"render",value:function(){return Object(b.jsx)("div",{children:Object(b.jsxs)(p.b,{history:h,children:[Object(b.jsx)(p.a,{path:"/",exact:!0,children:Object(b.jsx)(O,{onNameSubmit:this.onNameSubmit})}),Object(b.jsx)(p.a,{path:"/rooms",exact:!0,children:Object(b.jsx)(x,{})}),Object(b.jsx)(p.a,{path:"/chat",children:Object(b.jsx)(v,{userName:this.state.userName})})]})})}}]),s}(a.a.Component)),_=y;r.a.render(Object(b.jsx)(_,{}),document.querySelector("#root"))}},[[92,1,2]]]);
//# sourceMappingURL=main.ea9be378.chunk.js.map